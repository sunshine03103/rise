# 1.简介

消息保存跟据topic进行分类，消息发送者成为producer，消息接受者成为consumer。producer和consumer都依赖于zookeeper来保证系统可用性。

一个topic可以认为是一类消息，每个topic将被分成多个partition分区。每个partition在存储层层面是append log文件追加。消息会被追加到log文件的尾部。
每条消息在文件中的位置称为offset(偏移量)，offset为一个long型数字，它唯一地标记一条消息。

日志文件将会跟据broker中的配置要求，留一定的时间之后删除。

consumer需要保存消费信息的offset。消费时offset将会线性的向前驱动。

consumer和producer状态信息有zookeeper保存。

kakka基于文件存储。通过分区，可以将日志内容分散到多个server上来避免文件尺寸达到单机磁盘的上限。
越多partition可以容纳更多的consumer，提高并发消费能力。

每人partition都有一个server为leader.leader负责所有的读写操作，如果leader失效，那么将会有其他的follwer来接管，成为新的leader.

producers将消息发到指定topic，同时producer也能决定将此消息归属哪个partition.

对于一个topic，同一个group中不能有多于partitions个数的consumer同时消费，否则意味着某此consumer将无法得到消息。

使用场景：1.消息系统。2.网站活性跟踪。3.日志收集

＃ ２.设计原理

# 3.配置及实践
